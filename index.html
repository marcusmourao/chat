<!doctype html>
<html>
<head>
    <title>Redes 2016 - Chat Messenger</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col s8 m8 l8 bordered">
            <ul id="messages"></ul>
        </div>
        <div class="col s4 m4 l4">
            <ul id="users"></ul>
        </div>
    </div>
</div>
<form action="" method="post">
    <div class="container">
        <div class="row">
            <div class="input-field">
                <input class="bottom" id="m" autocomplete="off" />
                <button class="btn btn-large right">Enviar</button>
            </div>
        </div>
    </div>
</form>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script>
    var socket = io();
    $('form').submit(function(){
        socket.emit('chat message', $('#m').val()); // emite o evento de envio de mensagem
        $('#m').val('');                            // limpa o conte√∫do da caixa de texto
        return false;
    });
    socket.on('chat message', function(msg){
        $('#messages').append($('<li>').text(msg));
    });
    socket.on('conect', function(username){
        $("#users").empty();
        for(var i=0; i< username.length; i++)
            $('#users').append($('<li>').text(username[i] + " - (online)"));
    });

    socket.on('update', function(username){
        $("#users").empty();
        for(var i=0; i< username.length; i++)
            $('#users').append($('<li>').text(username[i] + " - (online)"));
    });
</script>
</body>
</html>